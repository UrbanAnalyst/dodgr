<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dodgr">
<title>dodgr isochrones, isodists, and isoverts • dodgr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dodgr isochrones, isodists, and isoverts">
<meta property="og:description" content="dodgr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light" data-bs-theme="default"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dodgr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0.002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Vignettes</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UrbanAnalyst/dodgr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>dodgr isochrones, isodists, and isoverts</h1>
                        <h4 data-toc-skip class="author">Mark
Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-05-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/UrbanAnalyst/dodgr/blob/HEAD/vignettes/iso.Rmd" class="external-link"><code>vignettes/iso.Rmd</code></a></small>
      <div class="d-none name"><code>iso.Rmd</code></div>
    </div>

    
    
<p>The <code>dodgr</code>package includes three functions for
calculating iso-contours from one or more points of origin:</p>
<ul>
<li>
<a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
for contours of equal distance;</li>
<li>
<a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>
for contours of equal time; and</li>
<li>
<a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
to return full set of vertices within defined isodistance or isochrone
contours.</li>
</ul>
<p>Each of these functions is fully vectorised to accept both multiple
origin points and multiple contours. Each returns a single
<code>data.frame</code> object, with a column specifying either the
distance or time limit (as <code>dlim</code> for <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>,
or <code>tlim</code> for <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>).
The functions are also internally parallelised for efficient
calculation.</p>
<div class="section level2">
<h2 id="input-formats">Input formats<a class="anchor" aria-label="anchor" href="#input-formats"></a>
</h2>
<p>The <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
function accepts arbitrary input, either as a generic <code>dodgr</code>
<code>data.frame</code> (with a “distance” column), or as street
networks derived from applying the <a href="https://UrbanAnalyst.github.io/dodgr/reference/weight_streetnet.html"><code>weight_streetnet()</code></a>
function to either <a href="https://r-spatial.github.io/sf" class="external-link"><code>sf</code></a> or <a href="https://hypertidy.github.io/silicate" class="external-link"><code>st</code></a> objects.
Time-based calculations in <code>dodgr</code> are only possible when
applied to street networks dervied from <a href="https://hypertidy.github.io/silicate" class="external-link"><code>st</code></a> objects,
because equivalent <code>sf</code>-based objects can only provide crude
estimates of journey times. The time-specific functions <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>
and <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
thus only accept <code>dodgr</code> street networks derived from
<code>sc</code> data. The following table summarises the requirements of
these functions:</p>
<table class="table">
<thead><tr class="header">
<th>Function</th>
<th>Input type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>dodgr_isodists</td>
<td>Either <code>sf</code> or <code>sc</code> format data</td>
</tr>
<tr class="even">
<td>dodgr_ isochrones</td>
<td>Only <code>sc</code> format data</td>
</tr>
<tr class="odd">
<td>dodgr_isoverts</td>
<td>Only <code>sc</code> format data</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="dodgr_isodists">dodgr_isodists<a class="anchor" aria-label="anchor" href="#dodgr_isodists"></a>
</h2>
<p>The <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
function calculates contours of equal distance from one or more points
of origin.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/weight_streetnet.html">weight_streetnet</a></span> <span class="op">(</span><span class="va">hampi</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">from_id</span>, size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 2527    5</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">from</th>
<th align="right">dlim</th>
<th align="left">id</th>
<th align="right">x</th>
<th align="right">y</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">7793105273</td>
<td align="right">200</td>
<td align="left">7793105273</td>
<td align="right">76.45106</td>
<td align="right">15.31341</td>
</tr>
<tr class="even">
<td align="left">7793105273</td>
<td align="right">200</td>
<td align="left">1376768511</td>
<td align="right">76.45128</td>
<td align="right">15.31469</td>
</tr>
<tr class="odd">
<td align="left">7793105273</td>
<td align="right">200</td>
<td align="left">7793105273</td>
<td align="right">76.45106</td>
<td align="right">15.31341</td>
</tr>
<tr class="even">
<td align="left">7793105273</td>
<td align="right">500</td>
<td align="left">7793105273</td>
<td align="right">76.45106</td>
<td align="right">15.31341</td>
</tr>
<tr class="odd">
<td align="left">7793105273</td>
<td align="right">500</td>
<td align="left">5351820856</td>
<td align="right">76.44991</td>
<td align="right">15.31114</td>
</tr>
<tr class="even">
<td align="left">7793105273</td>
<td align="right">500</td>
<td align="left">2398957682</td>
<td align="right">76.45169</td>
<td align="right">15.31642</td>
</tr>
</tbody>
</table>
<p>This function returns in this case a <code>data.frame</code> with the
columns shown above and 2,527 points defining the isodistance contours
from each origin (<code>from</code>) point, at the specified distances
of 200, 500, 1000, 2000 metres. There are naturally more points defining
the contours at longer distances:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  200  500 1000 2000 </span></span>
<span><span class="co">##  403  561  689  874</span></span></code></pre>
<p>The points defining the contours are arranged in an anticlockwise
order around each point of origin, and so can be directly visualised
using base graphics functions. This is easier to see by using just a
single point of origin:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span> <span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">from_id</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span><span class="op">)</span></span>
<span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># + 2 to avoid light colours at end of scale.</span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span><span class="op">)</span><span class="op">)</span> <span class="co"># plot max contour first</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span> <span class="op">(</span></span>
<span>    <span class="va">d</span><span class="op">$</span><span class="va">x</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="va">d</span><span class="op">$</span><span class="va">y</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="st">"l"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"longitude"</span>, ylab <span class="op">=</span> <span class="st">"latitude"</span></span>
<span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span> <span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span> <span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">x</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="va">d</span><span class="op">$</span><span class="va">y</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="va">i</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="iso_files/figure-html/isodist-plot-1.png" width="700"></p>
<div class="section level3">
<h3 id="the-concavity-parameter">The <code>concavity</code> parameter<a class="anchor" aria-label="anchor" href="#the-concavity-parameter"></a>
</h3>
<p>The default contours are convex hulls. The <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
and <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>
functions include an additional <code>concavity</code> parameter to
return generate concave isodistance or isochrone polygons, defaulting to
a value of 0 for no concavity. Changing this value can generate concave
contours like in the following results:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span> <span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">from_id</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span>, concavity <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span> <span class="op">(</span></span>
<span>    <span class="va">d</span><span class="op">$</span><span class="va">x</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="va">d</span><span class="op">$</span><span class="va">y</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="st">"l"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"longitude"</span>, ylab <span class="op">=</span> <span class="st">"latitude"</span></span>
<span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span> <span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">dlim</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span> <span class="op">(</span><span class="va">dlim</span><span class="op">)</span> <span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span> <span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">x</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, <span class="va">d</span><span class="op">$</span><span class="va">y</span> <span class="op">[</span><span class="va">index</span><span class="op">]</span>, col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="va">i</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="iso_files/figure-html/isodist-plot-concave-1.png" width="700"></p>
<p>The calculation of <code>isodists</code> or <code>isochrone</code>
values is cached, so different values of the <code>concavity</code>
parameter can be trialled without needing to re-calculate the underlying
values:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span> <span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">from_id</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span> <span class="op">(</span> <span class="co"># Initial call calculates distances to all points:</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span>, concavity <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.220   0.000   0.221</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span> <span class="op">(</span> <span class="co"># Subsequent call uses cached values:</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span>, concavity <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.037   0.000   0.036</span></span></code></pre>
<p>The <code>concavity</code> parameter has a default value of 0 for
strictly convex polygons. Values closer to 1 generate more concave
polygons. The following code demonstrates the effect of increasing
values of this parameter.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span> <span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">from_id</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fl">2000</span></span>
<span><span class="va">concavity</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">4</span> <span class="op">/</span> <span class="fl">4</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span> <span class="op">(</span><span class="va">concavity</span>, <span class="kw">function</span> <span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span>, concavity <span class="op">=</span> <span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span> <span class="op">(</span></span>
<span>    <span class="va">d</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">x</span>, <span class="va">d</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">y</span>,</span>
<span>    type <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>    col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"longitude"</span>, ylab <span class="op">=</span> <span class="st">"latitude"</span></span>
<span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span> <span class="op">(</span></span>
<span>        <span class="va">d</span> <span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">x</span>, <span class="va">d</span> <span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">y</span>,</span>
<span>        col <span class="op">=</span> <span class="va">cols</span> <span class="op">[</span><span class="va">i</span><span class="op">]</span>, lwd <span class="op">=</span> <span class="fl">6</span> <span class="op">-</span> <span class="va">i</span>, lty <span class="op">=</span> <span class="va">i</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_vertices.html">dodgr_vertices</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="va">v_from</span> <span class="op">&lt;-</span> <span class="va">v</span> <span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span> <span class="op">(</span><span class="va">from</span>, <span class="va">v</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span> <span class="op">(</span><span class="va">v_from</span> <span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">]</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">"red"</span>, cex <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="iso_files/figure-html/concavity-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="dodgr_isochrones">dodgr_isochrones<a class="anchor" aria-label="anchor" href="#dodgr_isochrones"></a>
</h2>
<p>The <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>
works just like <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
except that it can only be applied to street networks generated from <a href="https://hypertidy.github.io/silicate" class="external-link"><code>silicate</code> (SC)
format</a> data. The results differ only from equivalent distance
results in having a column named “tlim” (for “time”) instead of “dlim”
(for “distance”). The <code>concavity</code> parameter functions in
exactly the same way as described above.</p>
</div>
<div class="section level2">
<h2 id="dodgr_isoverts">dodgr_isoverts<a class="anchor" aria-label="anchor" href="#dodgr_isoverts"></a>
</h2>
<p>Both the <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
and <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>
functions work by estimating distances or times from specified origin
points to all points out to the maximum specified values of
<code>dlim</code> or <code>tlim</code>. A second stage then generates
convex or concave hulls around these points, with the result containing
an ordered sequence of points tracing the contours around these
hulls.</p>
<p>The <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
function generates the full underlying set of points without applying
any hull-tracing routines. This resultant points may be used, for
example, to apply some custom hull-tracing routine, or to perform
statistical analyses on the full points enclosed within specified values
of <code>dlim</code> or <code>tlim</code>. The object returned from this
function is identical to those demonstrated above, with a column named
“dlim” if the <code>dlim</code> parameter is specified, or “tlim” if the
<code>tlim</code> parameter is specified. The <code>data.frame</code>
returned from <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
will always contain more data, and have more rows, than equivalent
results from <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
or <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isochrones.html"><code>dodgr_isochrones()</code></a>.
The rows of the <code>data.frame</code> returned from <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
are ordered by increasing <code>dlim</code> or <code>tlim</code> values,
but rows for any given value of those parameters are in arbitrary order.
Each successively higher value of either <code>dlim</code> or
<code>tlim</code> includes all points denoted by all lower values. For
example, all values contained within <code>dlim = 200</code> are all
those with that specified value of <code>dlim</code> <em>plus</em> all
rows with any values of <code>dlim &lt; 200</code>.</p>
<p>The following code demonstrates typical sizes of results from the <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isodists.html"><code>dodgr_isodists()</code></a>
and <a href="https://UrbanAnalyst.github.io/dodgr/reference/dodgr_isoverts.html"><code>dodgr_isoverts()</code></a>
functions:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dodgr_streetnet_sc.html">dodgr_streetnet_sc</a></span> <span class="op">(</span><span class="st">"hampi india"</span><span class="op">)</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/weight_streetnet.html">weight_streetnet</a></span> <span class="op">(</span><span class="va">dat</span>, wt_profile <span class="op">=</span> <span class="st">"foot"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span> <span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">.vx0</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">dlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="fu"><a href="../reference/dodgr_isodists.html">dodgr_isodists</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 34</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="fu"><a href="../reference/dodgr_isoverts.html">dodgr_isoverts</a></span> <span class="op">(</span><span class="va">graph</span>, from <span class="op">=</span> <span class="va">from</span>, <span class="va">dlim</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 145</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Padgham, Andreas Petutschnig, David Cooley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
