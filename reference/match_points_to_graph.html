<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Alias for match_pts_to_graph — match_points_to_graph • dodgr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Alias for match_pts_to_graph — match_points_to_graph"><meta name="description" content="Match spatial points to the edges of a spatial graph, through finding the
edge with the closest perpendicular intersection. NOTE: Intersections are
calculated geometrically, and presume planar geometry. It is up to users of
projected geometrical data, such as those within a dodgr_streetnet object,
to ensure that either: (i) Data span an sufficiently small area that errors
from presuming planar geometry may be ignored; or (ii) Data are re-projected
to an equivalent planar geometry prior to calling this routine."><meta property="og:description" content="Match spatial points to the edges of a spatial graph, through finding the
edge with the closest perpendicular intersection. NOTE: Intersections are
calculated geometrically, and presume planar geometry. It is up to users of
projected geometrical data, such as those within a dodgr_streetnet object,
to ensure that either: (i) Data span an sufficiently small area that errors
from presuming planar geometry may be ignored; or (ii) Data are re-projected
to an equivalent planar geometry prior to calling this routine."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dodgr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1.017</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/UrbanAnalyst/dodgr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Alias for <a href="match_pts_to_graph.html">match_pts_to_graph</a></h1>
      <small class="dont-index">Source: <a href="https://github.com/UrbanAnalyst/dodgr/blob/main/R/match-points.R" class="external-link"><code>R/match-points.R</code></a></small>
      <div class="d-none name"><code>match_points_to_graph.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Match spatial points to the edges of a spatial graph, through finding the
edge with the closest perpendicular intersection. NOTE: Intersections are
calculated geometrically, and presume planar geometry. It is up to users of
projected geometrical data, such as those within a <code>dodgr_streetnet</code> object,
to ensure that either: (i) Data span an sufficiently small area that errors
from presuming planar geometry may be ignored; or (ii) Data are re-projected
to an equivalent planar geometry prior to calling this routine.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">match_points_to_graph</span><span class="op">(</span><span class="va">graph</span>, <span class="va">xy</span>, connected <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p>A <code>dodgr</code> graph with spatial coordinates, such as a
<code>dodgr_streetnet</code> object.</p></dd>


<dt id="arg-xy">xy<a class="anchor" aria-label="anchor" href="#arg-xy"></a></dt>
<dd><p>coordinates of points to be matched to the vertices, either as
matrix or <span class="pkg">sf</span>-formatted <code>data.frame</code>.</p></dd>


<dt id="arg-connected">connected<a class="anchor" aria-label="anchor" href="#arg-connected"></a></dt>
<dd><p>Should points be matched to the same (largest) connected
component of graph? If <code>FALSE</code> and these points are to be used for a
<code>dodgr</code> routing routine (<a href="dodgr_dists.html">dodgr_dists</a>, <a href="dodgr_paths.html">dodgr_paths</a>, or
<a href="dodgr_flows_aggregate.html">dodgr_flows_aggregate</a>), then results may not be returned if points are
not part of the same connected component. On the other hand, forcing them to
be part of the same connected component may decrease the spatial accuracy of
matching.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For <code>distances = FALSE</code> (default), a vector index matching the <code>xy</code>
coordinates to nearest edges. For bi-directional edges, only one match is
returned, and it is up to the user to identify and suitably process matching
edge pairs. For 'distances = TRUE', a 'data.frame' of four columns:</p><ul><li><p>"index" The index of closest edges in "graph", as described above.</p></li>
<li><p>"d_signed" The perpendicular distance from ech point to the nearest
edge, with negative distances denoting points to the left of edges, and
positive distances denoting points to the right. Distances of zero denote
points lying precisely on the line of an edge (potentially including cases
where nearest point of bisection lies beyond the actual edge).</p></li>
<li><p>"x" The x-coordinate of the point of intersection.</p></li>
<li><p>"y" The y-coordinate of the point of intersection.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other match:
<code><a href="add_nodes_to_graph.html">add_nodes_to_graph</a>()</code>,
<code><a href="match_points_to_verts.html">match_points_to_verts</a>()</code>,
<code><a href="match_pts_to_graph.html">match_pts_to_graph</a>()</code>,
<code><a href="match_pts_to_verts.html">match_pts_to_verts</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="weight_streetnet.html">weight_streetnet</a></span> <span class="op">(</span><span class="va">hampi</span>, wt_profile <span class="op">=</span> <span class="st">"foot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Then generate some random points to match to graph</span></span></span>
<span class="r-in"><span><span class="va">verts</span> <span class="op">&lt;-</span> <span class="fu"><a href="dodgr_vertices.html">dodgr_vertices</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">npts</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span> <span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span> <span class="op">(</span><span class="va">verts</span><span class="op">$</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span> <span class="op">(</span><span class="va">npts</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span> <span class="op">(</span><span class="va">verts</span><span class="op">$</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span> <span class="op">(</span><span class="va">verts</span><span class="op">$</span><span class="va">y</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span> <span class="op">(</span><span class="va">npts</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span> <span class="op">(</span><span class="va">verts</span><span class="op">$</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="match_pts_to_graph.html">match_pts_to_graph</a></span> <span class="op">(</span><span class="va">graph</span>, <span class="va">xy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">graph</span> <span class="op">[</span><span class="va">edges</span>, <span class="op">]</span> <span class="co"># The edges of the graph closest to `xy`</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        geom_num edge_id    from_id from_lon from_lat      to_id   to_lon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395         89    3395 2588119056 76.42341 15.31717 2588146107 76.42349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6251        203    6251 6597298435 76.42010 15.35136 6597300510 76.42343</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5917        183    5917 2419196948 76.47589 15.30930 2398957539 76.47550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395.1       89    3395 2588119056 76.42341 15.31717 2588146107 76.42349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6253        203    6253 6597300510 76.42343 15.35101 1388482473 76.42580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5915        183    5915  313796433 76.47604 15.30953 2419196948 76.47589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6261        203    6261 3921525779 76.43165 15.35029 1204772909 76.43202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4705        133    4705 2398957616 76.46775 15.31425 2398957612 76.46790</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5301        158    5301 3921524453 76.44483 15.34252 3921524452 76.44502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6201        203    6201 7769271419 76.37263 15.34499 7769190961 76.38203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          to_lat          d d_weighted      highway    way_id component</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395   15.31746   33.00845   41.26056 unclassified 252786290         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6251   15.35101  359.82586  719.65173      primary 835018468         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5917   15.30880   69.14107  138.28215      primary 652570479         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395.1 15.31746   33.00845   41.26056 unclassified 252786290         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6253   15.35076  255.50004  511.00008      primary 835018468         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5915   15.30930   29.48529   58.97058      primary 652570479         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6261   15.35025   39.68515   79.37029      primary 835018468         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4705   15.31419   16.95158   28.25263    secondary 327102382         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5301   15.34246   20.81961   21.91537        track 388983289         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6201   15.34708 1035.68141 2071.36283      primary 835018468         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             time time_weighted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395    23.76608      29.70760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6251   259.07462     518.14924</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5917    49.78157      99.56314</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3395.1  23.76608      29.70760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6253   183.96003     367.92006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5915    21.22941      42.45882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6261    28.57331      57.14661</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4705    12.20514      20.34189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5301    14.99012      15.77907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6201   745.69062    1491.38124</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Padgham, Andreas Petutschnig, David Cooley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

