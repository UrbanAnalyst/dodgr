<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cumulative distances along different edge categories — dodgr_dists_categorical • dodgr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cumulative distances along different edge categories — dodgr_dists_categorical"><meta name="description" content="Cumulative distances along different edge categories"><meta property="og:description" content="Cumulative distances along different edge categories"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dodgr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1.042</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/UrbanAnalyst/dodgr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cumulative distances along different edge categories</h1>
      <small class="dont-index">Source: <a href="https://github.com/UrbanAnalyst/dodgr/blob/main/R/dists-categorical.R" class="external-link"><code>R/dists-categorical.R</code></a></small>
      <div class="d-none name"><code>dodgr_dists_categorical.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cumulative distances along different edge categories</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dodgr_dists_categorical</span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  proportions_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pairwise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dlimit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heap <span class="op">=</span> <span class="st">"BHeap"</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p><code>data.frame</code> or equivalent object representing the network
graph which must have a column named "edge_type" which labels categories of
edge types along which categorical distances are to be aggregated (see
Note).</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>Vector or matrix of points <strong>from</strong> which route distances are to
be calculated, specified as one of the following:</p><ul><li><p>Single character vector precisely matching node numbers or names
given in <code>graph$from</code> or <code>graph$to</code>.</p></li>
<li><p>Single vector of integer-ish values, in which case these will be
presumed to specify indices into <a href="dodgr_vertices.html">dodgr_vertices</a>, and NOT to
correspond to values in the 'from' or 'to' columns of the graph. See the
example below for a demonstration.</p></li>
<li><p>Matrix or equivalent of longitude and latitude coordinates, in which
case these will be matched on to the nearest coordinates of 'from' and 'to'
points in the graph.</p></li>
</ul></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>Vector or matrix of points <strong>to</strong> which route distances are to be
calculated. If <code>to</code> is <code>NULL</code>, pairwise distances will be calculated from
all <code>from</code> points to all other nodes in <code>graph</code>. If both <code>from</code> and <code>to</code> are
<code>NULL</code>, pairwise distances are calculated between all nodes in <code>graph</code>.</p></dd>


<dt id="arg-proportions-only">proportions_only<a class="anchor" aria-label="anchor" href="#arg-proportions-only"></a></dt>
<dd><p>If <code>FALSE</code>, return distance matrices for full
distances and for each edge category; if <code>TRUE</code>, return single vector of
proportional distances, like the <code>summary</code> function applied to full
results. See Note.</p></dd>


<dt id="arg-pairwise">pairwise<a class="anchor" aria-label="anchor" href="#arg-pairwise"></a></dt>
<dd><p>If <code>TRUE</code>, calculate distances only between the ordered
pairs of <code>from</code> and <code>to</code>. In this case, neither the <code>proportions_only</code> nor
<code>dlimit</code> parameters have any effect, and the result is a single matrix with
one row for each pair of <code>from</code>-<code>to</code> points, and one column for each
category.</p></dd>


<dt id="arg-dlimit">dlimit<a class="anchor" aria-label="anchor" href="#arg-dlimit"></a></dt>
<dd><p>If no value to <code>to</code> is given, distances are aggregated from
each <code>from</code> point out to the specified distance limit (in the same units as
the edge distances of the input graph). <code>dlimit</code> only has any effect if <code>to</code>
is not specified, in which case the <code>proportions_only</code> argument has no
effect.</p></dd>


<dt id="arg-heap">heap<a class="anchor" aria-label="anchor" href="#arg-heap"></a></dt>
<dd><p>Type of heap to use in priority queue. Options include
Fibonacci Heap (default; <code>FHeap</code>), Binary Heap (<code>BHeap</code>),
<code>Trinomial Heap (</code>TriHeap<code>), Extended Trinomial Heap (</code>TriHeapExt<code>, and 2-3 Heap (</code>Heap23`).</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>If <code>FALSE</code>, display progress messages on screen.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>to</code> is specified, a list of distance matrices of equal dimensions
(length(from), length(to)), the first of which ("distance") holds the final
distances, while the rest are one matrix for each unique value of
"edge_type", holding the distances traversed along those types of edges only.
Otherwise, a single matrix of total distances along all ways from each point
out to the specified value of <code>dlimit</code>, along with distances along each of
the different kinds of ways specified in the "edge_type" column of the input
graph.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The "edge_type" column in the graph can contain any kind of discrete or
categorical values, although integer values of 0 are not permissible. <code>NA</code>
values are ignored. The function requires one full distance
matrix to be stored for each category of "edge_type" (unless
<code>proportions_only = TRUE</code>). It is wise to keep numbers of discrete types as
low as possible, especially for large distance matrices.</p>
<p>Setting the <code>proportions_only</code> flag to <code>TRUE</code> may be advantageous for
large jobs, because this avoids construction of the full matrices. This may
speed up calculations, but perhaps more importantly it may make possible
calculations which would otherwise require distance matrices too large to be
directly stored.</p>
<p>Calculations are not able to be interrupted (for example, by <code>Ctrl-C</code>),
and can only be stopped by killing the R process.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other distances:
<code><a href="dodgr_distances.html">dodgr_distances</a>()</code>,
<code><a href="dodgr_dists.html">dodgr_dists</a>()</code>,
<code><a href="dodgr_dists_nearest.html">dodgr_dists_nearest</a>()</code>,
<code><a href="dodgr_flows_aggregate.html">dodgr_flows_aggregate</a>()</code>,
<code><a href="dodgr_flows_disperse.html">dodgr_flows_disperse</a>()</code>,
<code><a href="dodgr_flows_si.html">dodgr_flows_si</a>()</code>,
<code><a href="dodgr_isochrones.html">dodgr_isochrones</a>()</code>,
<code><a href="dodgr_isodists.html">dodgr_isodists</a>()</code>,
<code><a href="dodgr_isoverts.html">dodgr_isoverts</a>()</code>,
<code><a href="dodgr_paths.html">dodgr_paths</a>()</code>,
<code><a href="dodgr_times.html">dodgr_times</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Prepare a graph for categorical routing by including an "edge_type" column</span></span></span>
<span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="weight_streetnet.html">weight_streetnet</a></span> <span class="op">(</span><span class="va">hampi</span>, wt_profile <span class="op">=</span> <span class="st">"foot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">[</span><span class="va">graph</span><span class="op">$</span><span class="va">component</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">graph</span><span class="op">$</span><span class="va">edge_type</span> <span class="op">&lt;-</span> <span class="va">graph</span><span class="op">$</span><span class="va">highway</span></span></span>
<span class="r-in"><span><span class="co"># Define start and end points for categorical distances; using all vertices</span></span></span>
<span class="r-in"><span><span class="co"># here.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">$</span><span class="va">edge_type</span><span class="op">)</span><span class="op">)</span> <span class="co"># Number of categories</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 8</span>
<span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="dodgr_vertices.html">dodgr_vertices</a></span> <span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">from</span> <span class="op">&lt;-</span> <span class="va">to</span> <span class="op">&lt;-</span> <span class="va">v</span><span class="op">$</span><span class="va">id</span> <span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">dodgr_dists_categorical</span> <span class="op">(</span><span class="va">graph</span>, <span class="va">from</span>, <span class="va">to</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "list"                    "dodgr_dists_categorical"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 9</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span> <span class="op">(</span><span class="va">d</span>, <span class="va">dim</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      distances path primary residential secondary service steps track</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]       100  100     100         100       100     100   100   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]       100  100     100         100       100     100   100   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      unclassified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]          100</span>
<span class="r-in"><span><span class="co"># 9 distance matrices, all of same dimensions, first of which is standard</span></span></span>
<span class="r-in"><span><span class="co"># distance matrix</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="co"># print summary as proportions along each "edge_type"</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportional distances along each kind of edge:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   path: 0.8941</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   primary: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   residential: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   secondary: 0.0159</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   service: 0.0572</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   steps: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   track: 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   unclassified: 0.0328</span>
<span class="r-in"><span><span class="co"># or directly calculate proportions only</span></span></span>
<span class="r-in"><span><span class="fu">dodgr_dists_categorical</span> <span class="op">(</span><span class="va">graph</span>, <span class="va">from</span>, <span class="va">to</span>,</span></span>
<span class="r-in"><span>    proportions_only <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         path      primary  residential    secondary      service        steps </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.89410018   0.00000000   0.00000000   0.01590959   0.05717364   0.00000000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        track unclassified </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   0.00000000   0.03281658 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pairwise distances return single matrix with number of rows equal to 'from'</span></span></span>
<span class="r-in"><span><span class="co"># / 'to', and number of columns equal to number of edge types plus one for</span></span></span>
<span class="r-in"><span><span class="co"># total distances.</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">dodgr_dists_categorical</span> <span class="op">(</span><span class="va">graph</span>, <span class="va">from</span>, <span class="va">to</span>, pairwise <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "matrix" "array" </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 100   9</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The 'dlimit' parameter can be used to calculate total distances along each</span></span></span>
<span class="r-in"><span><span class="co"># category of edges from a set of points out to specified threshold:</span></span></span>
<span class="r-in"><span><span class="va">dlimit</span> <span class="op">&lt;-</span> <span class="fl">2000</span> <span class="co"># in metres</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">dodgr_dists_categorical</span> <span class="op">(</span><span class="va">graph</span>, <span class="va">from</span>, dlimit <span class="op">=</span> <span class="va">dlimit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="co"># length(from), length(unique(edge_type)) + 1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 100   9</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Padgham, Andreas Petutschnig, David Cooley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

