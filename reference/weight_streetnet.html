<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Weight a street network according to a specified weighting profile. — weight_streetnet • dodgr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Weight a street network according to a specified weighting profile. — weight_streetnet"><meta name="description" content='Weight (or re-weight) an sf or silicate ("SC") formatted OSM
street network according to a specified weighting  profile. Standard
weighting profiles may be specified by name, as one of:
foot
horse
wheelchair
bicycle
moped
motorcycle
motorcar
goods
hgv
psv
Custom weighting profiles are also possible, as explained in the Note below.'><meta property="og:description" content='Weight (or re-weight) an sf or silicate ("SC") formatted OSM
street network according to a specified weighting  profile. Standard
weighting profiles may be specified by name, as one of:
foot
horse
wheelchair
bicycle
moped
motorcycle
motorcar
goods
hgv
psv
Custom weighting profiles are also possible, as explained in the Note below.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dodgr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/UrbanAnalyst/dodgr"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Weight a street network according to a specified weighting profile.</h1>
      <small class="dont-index">Source: <a href="https://github.com/UrbanAnalyst/dodgr/blob/main/R/weight-streetnet.R" class="external-link"><code>R/weight-streetnet.R</code></a></small>
      <div class="d-none name"><code>weight_streetnet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Weight (or re-weight) an <span class="pkg">sf</span> or <span class="pkg">silicate</span> ("<em>SC</em>") formatted OSM
street network according to a specified weighting  profile. Standard
weighting profiles may be specified by name, as one of:</p><ul><li><p>foot</p></li>
<li><p>horse</p></li>
<li><p>wheelchair</p></li>
<li><p>bicycle</p></li>
<li><p>moped</p></li>
<li><p>motorcycle</p></li>
<li><p>motorcar</p></li>
<li><p>goods</p></li>
<li><p>hgv</p></li>
<li><p>psv</p></li>
</ul><p>Custom weighting profiles are also possible, as explained in the Note below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weight_streetnet</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  wt_profile <span class="op">=</span> <span class="st">"bicycle"</span>,</span>
<span>  wt_profile_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turn_penalty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"highway"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"osm_id"</span>,</span>
<span>  keep_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  left_side <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">weight_streetnet</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  wt_profile <span class="op">=</span> <span class="st">"bicycle"</span>,</span>
<span>  wt_profile_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turn_penalty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"highway"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"osm_id"</span>,</span>
<span>  keep_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  left_side <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'sf'</span></span>
<span><span class="fu">weight_streetnet</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  wt_profile <span class="op">=</span> <span class="st">"bicycle"</span>,</span>
<span>  wt_profile_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turn_penalty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"highway"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"osm_id"</span>,</span>
<span>  keep_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  left_side <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'sc'</span></span>
<span><span class="fu">weight_streetnet</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  wt_profile <span class="op">=</span> <span class="st">"bicycle"</span>,</span>
<span>  wt_profile_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turn_penalty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"highway"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"osm_id"</span>,</span>
<span>  keep_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  left_side <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'SC'</span></span>
<span><span class="fu">weight_streetnet</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  wt_profile <span class="op">=</span> <span class="st">"bicycle"</span>,</span>
<span>  wt_profile_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  turn_penalty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type_col <span class="op">=</span> <span class="st">"highway"</span>,</span>
<span>  id_col <span class="op">=</span> <span class="st">"osm_id"</span>,</span>
<span>  keep_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  left_side <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A street network represented either as <code>sf</code> <code>LINESTRING</code>
objects, typically extracted with <a href="dodgr_streetnet.html">dodgr_streetnet</a>, or as an <code>SC</code>
(<code>silicate</code>) object typically extracted with the <a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>.</p></dd>


<dt id="arg-wt-profile">wt_profile<a class="anchor" aria-label="anchor" href="#arg-wt-profile"></a></dt>
<dd><p>Name of weighting profile, or <code>data.frame</code> specifying
custom values (see Details)</p></dd>


<dt id="arg-wt-profile-file">wt_profile_file<a class="anchor" aria-label="anchor" href="#arg-wt-profile-file"></a></dt>
<dd><p>Name of locally-stored, <code>.json</code>-formatted version of
<code><a href="weighting_profiles.html">dodgr::weighting_profiles</a></code>, created with <a href="write_dodgr_wt_profile.html">write_dodgr_wt_profile</a>, and
modified as desired.</p></dd>


<dt id="arg-turn-penalty">turn_penalty<a class="anchor" aria-label="anchor" href="#arg-turn-penalty"></a></dt>
<dd><p>Including time penalty on edges for turning across
oncoming traffic at intersections (see Note).</p></dd>


<dt id="arg-type-col">type_col<a class="anchor" aria-label="anchor" href="#arg-type-col"></a></dt>
<dd><p>Specify column of the <code>sf</code> <code>data.frame</code> object
which designates different types of highways to be used for weighting
(default works with <code>osmdata</code> objects).</p></dd>


<dt id="arg-id-col">id_col<a class="anchor" aria-label="anchor" href="#arg-id-col"></a></dt>
<dd><p>For <code>sf</code>-formatted data only: Specify column of the <span class="pkg">sf</span>
<code>data.frame</code> object which provides unique identifiers for each highway
(default works with <code>osmdata</code> objects).</p></dd>


<dt id="arg-keep-cols">keep_cols<a class="anchor" aria-label="anchor" href="#arg-keep-cols"></a></dt>
<dd><p>Vectors of columns from <code>x</code> to be kept in the resultant
<code>dodgr</code> network; vector can be either names, regex-patterns,  or indices of
desired columns (see notes).</p></dd>


<dt id="arg-left-side">left_side<a class="anchor" aria-label="anchor" href="#arg-left-side"></a></dt>
<dd><p>Does traffic travel on the left side of the road (<code>TRUE</code>) or
the right side (<code>FALSE</code>)? - only has effect on turn angle calculations for
edge times.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> of edges representing the street network, with
distances in metres and times in seconds, along with a column of graph
component numbers. Times for <span class="pkg">sf</span>-formatted street networks are only
approximate, and do not take into account traffic lights, turn angles, or
elevation changes. Times for <span class="pkg">sc</span>-formatted street networks take into
account all of these factors, with elevation changes automatically taken into
account for networks generated with the <span class="pkg">osmdata</span> function
<code><a href="https://docs.ropensci.org/osmdata/reference/osm_elevation.html" class="external-link">osm_elevation()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Distances along each edge are calculated using the <span class="pkg">geodist</span> package,
defaulting to the Mapbox "cheap" metric if maximal network distances are &lt;
100km, otherwise using Haversine distances. The
<a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a> function can be called to force edge
distances to be calculated using more accurate yet slower geodesic
distances.</p>
<p>The structure of networks generated by this function is dependent
on many aspects of the input network, and in particular on specific
key-value pairs defined in the underlying OpenStreetMap (OSM) data.</p>
<p>Many key-value pairs influence the resultant network through being used in
specified weighting profiles. Keys used in weighting profiles are always
kept in the weighted networks, and are specified in
<a href="weighting_profiles.html">weighting_profiles</a> by the "way" column in the "weighting_profiles"
item. These include:</p>
<ul><li><p>"bridleway"</p></li>
<li><p>"cycleway"</p></li>
<li><p>"ferry"</p></li>
<li><p>"footway"</p></li>
<li><p>"living_street"</p></li>
<li><p>"motorway"</p></li>
<li><p>"motorway_link</p></li>
<li><p>"path"</p></li>
<li><p>"pedestrian"</p></li>
<li><p>"primary"</p></li>
<li><p>"primary_link"</p></li>
<li><p>"residential"</p></li>
<li><p>"secondary"</p></li>
<li><p>"secondary_link</p></li>
<li><p>"service"</p></li>
<li><p>"steps"</p></li>
<li><p>"tertiary"</p></li>
<li><p>"tertiary_link"</p></li>
<li><p>"track"</p></li>
<li><p>"trunk"</p></li>
<li><p>"trunk_link</p></li>
<li><p>"unclassified"</p></li>
</ul><p>Some of these are only optionally kept, dependent on the weighting profile
chosen. For example, "cycleway" keys are only kept for bicycle weighting.
Most of the specified keys also include all possible variations on those
keys. For the example of "cycleway" again, key-value pairs are also kept for
"cycleway:left" and "cycleway:right".</p>
<p>The following additional keys are also automatically retained in weighted
networks:</p>
<ul><li><p>"highway"</p></li>
<li><p>"junction"</p></li>
<li><p>"lanes"</p></li>
<li><p>"maxspeed"</p></li>
<li><p>"oneway", including with all alternative forms such as "oneway.bicycle"</p></li>
<li><p>"surface"</p></li>
</ul><p>Realistic routing including factors such as access restrictions, turn
penalties, and effects of incline, can only be implemented when the objects
passed to <code>weight_streetnet</code> are of <span class="pkg">sc</span> ("silicate") format, generated
with <a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a> (and possibly enhanced through applying the
<span class="pkg">osmdata</span> function <code><a href="https://docs.ropensci.org/osmdata/reference/osm_elevation.html" class="external-link">osm_elevation()</a></code>). Restrictions applied to ways (in
OSM terminology) may be controlled by ensuring specific columns are retained
in the <code>dodgr</code> network with the <code>keep_cols</code> argument. For example,
restrictions on access are generally specified by specifying a value for the
key of "access". Include "access" in <code>keep_cols</code> will ensure these values
are retained in the <code>dodgr</code> version, from which ways with specified values
can easily be removed or modified, as demonstrated in the examples.</p>
<p>Restrictions and time-penalties on turns can be implemented by setting
<code>turn_penalty = TRUE</code>, which will then honour turn restrictions specified in
OSM (unless the "penalties" table of <a href="weighting_profiles.html">weighting_profiles</a> has
<code>restrictions = FALSE</code> for a specified <code>wt_profile</code>). Resultant graphs are
fundamentally different from the default for distance-based routing. These
graphs may be used directly in most 'dodgr' functions, but generally only if
they have been created by calling this function in the same session, or if
they have been saved and loaded with the <a href="dodgr_save_streetnet.html">dodgr_save_streetnet</a> and
<a href="dodgr_load_streetnet.html">dodgr_load_streetnet</a> functions. (This is because the weighted
streetnets also have accompanying data stored in a local temporary cache
directory; attempting to pass a weighted street network without these
accompanying cache files will generally error.)</p>
<p>Some key-value pairs may also directly influence not just the value of the
graph produced by this function, but also its size. Among these are "oneway"
flags. Without these flags, each edge will be represented in <em>directed</em> form,
and so as two rows of the graph: one for A -&gt; B, and one for B -&gt; A. If a
way is tagged in OSM as "oneway" = "yes", and if oneway flags are respected
for a chosen weighting profile (which, for example, they are generally not
for pedestrian or "foot" weighting), then only one edge will be returned
representing travel in the direction permitted within the OSM data. Thus
weighting a network which includes "oneway" flags, and using a weighting
profile which respects these, will generate a graph with fewer rows than a
graph produced by ignoring those "oneway" flags.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Names for the <code>wt_profile</code> parameter are taken from
<a href="weighting_profiles.html">weighting_profiles</a>, which is a list including a <code>data.frame</code> also
called <code>weighting_profiles</code> of weights for different modes of transport.
Values for <code>wt_profile</code> are taken from current modes included there, which
are "bicycle", "foot", "goods", "hgv", "horse", "moped", "motorcar",
"motorcycle", "psv", and "wheelchair". Railway routing can be implemented
with the separate function <a href="weight_railway.html">weight_railway</a>. Alternatively, the entire
<code>weighting_profile</code> structures can be written to a local <code>.json</code>-formatted
file with <a href="write_dodgr_wt_profile.html">write_dodgr_wt_profile</a>, the values edited as desired, and
the name of this file passed as the <code>wt_profile_file</code> parameter.</p>
<p>The resultant graph includes only those edges for which the given
weighting profile specifies finite edge weights. Any edges of types not
present in a given weighting profile are automatically removed from the
weighted streetnet.</p>
<p>If the resultant graph is to be contracted via
<a href="dodgr_contract_graph.html">dodgr_contract_graph</a>, <strong>and</strong> if the columns of the graph have been,
or will be, modified, then automatic caching must be switched off with
<a href="dodgr_cache_off.html">dodgr_cache_off</a>. If not, the <a href="dodgr_contract_graph.html">dodgr_contract_graph</a> function will
return the automatically cached version, which is the contracted version of
the full graph prior to any modification of columns.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="write_dodgr_wt_profile.html">write_dodgr_wt_profile</a>, <a href="dodgr_times.html">dodgr_times</a></p>
<p>Other extraction:
<code><a href="dodgr_streetnet.html">dodgr_streetnet</a>()</code>,
<code><a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a>()</code>,
<code><a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>()</code>,
<code><a href="weight_railway.html">weight_railway</a>()</code></p>
<p>Other extraction:
<code><a href="dodgr_streetnet.html">dodgr_streetnet</a>()</code>,
<code><a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a>()</code>,
<code><a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>()</code>,
<code><a href="weight_railway.html">weight_railway</a>()</code></p>
<p>Other extraction:
<code><a href="dodgr_streetnet.html">dodgr_streetnet</a>()</code>,
<code><a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a>()</code>,
<code><a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>()</code>,
<code><a href="weight_railway.html">weight_railway</a>()</code></p>
<p>Other extraction:
<code><a href="dodgr_streetnet.html">dodgr_streetnet</a>()</code>,
<code><a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a>()</code>,
<code><a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>()</code>,
<code><a href="weight_railway.html">weight_railway</a>()</code></p>
<p>Other extraction:
<code><a href="dodgr_streetnet.html">dodgr_streetnet</a>()</code>,
<code><a href="dodgr_streetnet_geodesic.html">dodgr_streetnet_geodesic</a>()</code>,
<code><a href="dodgr_streetnet_sc.html">dodgr_streetnet_sc</a>()</code>,
<code><a href="weight_railway.html">weight_railway</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># hampi is included with package as an 'osmdata' sf-formatted street network</span></span></span>
<span class="r-in"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu">weight_streetnet</span> <span class="op">(</span><span class="va">hampi</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># data.frame</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dodgr_streetnet" "data.frame"     </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># 6096  11; 6096 streets</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6813   16</span>
<span class="r-in"><span><span class="co"># os_roads_bristol is also included as an sf data.frame, but in a different</span></span></span>
<span class="r-in"><span><span class="co"># format requiring identification of columns and specification of custom</span></span></span>
<span class="r-in"><span><span class="co"># weighting scheme.</span></span></span>
<span class="r-in"><span><span class="va">colnm</span> <span class="op">&lt;-</span> <span class="st">"formOfWay"</span></span></span>
<span class="r-in"><span><span class="va">wts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span> <span class="op">(</span></span></span>
<span class="r-in"><span>    name <span class="op">=</span> <span class="st">"custom"</span>,</span></span>
<span class="r-in"><span>    way <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span> <span class="op">(</span><span class="va">os_roads_bristol</span> <span class="op">[[</span><span class="va">colnm</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.8</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu">weight_streetnet</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">os_roads_bristol</span>,</span></span>
<span class="r-in"><span>    wt_profile <span class="op">=</span> <span class="va">wts</span>,</span></span>
<span class="r-in"><span>    type_col <span class="op">=</span> <span class="va">colnm</span>, id_col <span class="op">=</span> <span class="st">"identifier"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># 406 11; 406 streets</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 812  16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># An example for a generic (non-OSM) highway, represented as the</span></span></span>
<span class="r-in"><span><span class="co"># `routes_fast` object of the \pkg{stplanr} package, which is a</span></span></span>
<span class="r-in"><span><span class="co"># SpatialLinesDataFrame.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/stplanr" class="external-link">stplanr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># merge all of the 'routes_fast' lines into a single network</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">overline</span> <span class="op">(</span><span class="va">routes_fast</span>, attrib <span class="op">=</span> <span class="st">"length"</span>, buff_dist <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span> <span class="op">(</span><span class="va">r</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># We need to specify both a `type` and `id` column for the</span></span></span>
<span class="r-in"><span><span class="co"># \link{weight_streetnet} function.</span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">$</span><span class="va">type</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span> <span class="op">(</span><span class="va">r</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">weight_streetnet</span> <span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">r</span>,</span></span>
<span class="r-in"><span>    type_col <span class="op">=</span> <span class="st">"type"</span>,</span></span>
<span class="r-in"><span>    id_col <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>    wt_profile <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Padgham, Andreas Petutschnig, David Cooley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

