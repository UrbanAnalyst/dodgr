% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/match-points-by-edge.R
\name{add_nodes_to_graph_by_edge}
\alias{add_nodes_to_graph_by_edge}
\title{Add nodes to a graph by matching them to the nearest edges, processing
multiple points on the same edge efficiently.}
\usage{
add_nodes_to_graph_by_edge(
  graph,
  xy,
  dist_tol = 1e-06,
  intersections_only = FALSE,
  xy_id = NULL,
  wt_profile = NULL,
  wt_profile_file = NULL,
  highway = NULL,
  max_distance = Inf,
  replace_component = TRUE
)
}
\arguments{
\item{graph}{A \code{dodgr} graph with spatial coordinates, such as a
\code{dodgr_streetnet} object.}

\item{xy}{coordinates of points to be matched to the vertices, either as
matrix or \pkg{sf}-formatted \code{data.frame}.}

\item{dist_tol}{Only insert new nodes if they are further from existing nodes
than this distance, expressed in units of the distance column of \code{graph}.}

\item{intersections_only}{If \code{FALSE}}

\item{xy_id}{Optional vector of IDs to assign to the new nodes. If NULL, IDs
will be generated automatically.}

\item{wt_profile}{Character string specifying the weight profile to use for
edges connecting to original points (e.g., "foot", "bike", "car").}

\item{wt_profile_file}{Character string specifying the file path to a custom
weight profile CSV file. Used only if \code{wt_profile} is NULL.}

\item{highway}{Character string specifying the highway type for edges connecting
to original points. Must be a type defined in the weight profile.}

\item{max_distance}{Numeric value specifying the maximum allowed distance for edges
connecting to original points. Points beyond this distance won't be connected.}

\item{replace_component}{Logical value specifying whether to recalculate graph
component IDs after adding the new nodes and edges.}
}
\value{
Modified version of graph with nodes added at specified locations,
original edges split at intersection points, and (unless \code{intersections_only=TRUE})
additional edges connecting to the original points.
}
\description{
This function extends \link{add_nodes_to_graph} by handling cases where multiple
points match to the same edge more efficiently. It splits edges at points of
perpendicular intersection and optionally creates edges connecting to the original
points.
}
